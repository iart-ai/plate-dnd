{"version":3,"sources":["../src/createDndPlugin.tsx","../src/components/Scroller/DndScroller.tsx","../src/dndStore.ts","../src/components/Scroller/Scroller.tsx","../src/components/Scroller/ScrollArea.tsx","../src/components/useDraggable.ts","../src/components/useWithDraggable.ts","../src/components/withDraggable.tsx","../src/hooks/useDndNode.ts","../src/hooks/useDragNode.ts","../src/hooks/useDropNode.ts","../src/transforms/onDropNode.ts","../src/utils/getHoverDirection.ts","../src/utils/getNewDirection.ts","../src/transforms/onHoverNode.ts","../src/hooks/useDragBlock.ts","../src/hooks/useDndBlock.ts","../src/hooks/useDropBlock.ts","../src/queries/getBlocksWithId.ts","../src/queries/getNodesRange.ts","../src/transforms/focusBlockStartById.ts","../src/transforms/removeBlocksAndFocus.ts","../src/transforms/selectBlockById.ts","../src/transforms/selectBlocksBySelectionOrId.ts"],"sourcesContent":["import React from \"react\";\nimport { createPluginFactory } from \"@udecode/plate-common\";\n\nimport { DndScroller, ScrollerProps } from \"./components/Scroller\";\nimport { dndStore } from \"./dndStore\";\n\nexport interface DndPlugin {\n  enableScroller?: boolean;\n  scrollerProps?: Partial<ScrollerProps>;\n}\n\nexport const KEY_DND = \"dnd\";\n\nexport const createDndPlugin = createPluginFactory<DndPlugin>({\n  key: KEY_DND,\n  handlers: {\n    onDragStart: () => () => dndStore.set.isDragging(true),\n    onDragEnd: (editor) => () => {\n      dndStore.set.isDragging(false);\n      console.log(\"测试33\", editor.id);\n      // dndStore.set.editorId(editor.id);\n    },\n    onDrop: (editor) => () => editor.isDragging as boolean,\n  },\n  then: (editor, { options }) => ({\n    renderAfterEditable: options.enableScroller ? () => <DndScroller {...options?.scrollerProps} /> : undefined,\n  }),\n});\n","import React from \"react\";\n\nimport { dndStore } from \"../../dndStore\";\nimport { Scroller, ScrollerProps } from \"./Scroller\";\n\nexport function DndScroller(props: Partial<ScrollerProps>) {\n  const isDragging = dndStore.use.isDragging();\n  const [show, setShow] = React.useState(false);\n\n  React.useEffect(() => {\n    if (isDragging) {\n      const timeout = setTimeout(() => {\n        setShow(true);\n      }, 100);\n      return () => clearTimeout(timeout);\n    }\n    setShow(false);\n  }, [isDragging, show]);\n\n  return <Scroller enabled={isDragging && show} {...props} />;\n}\n","import { createZustandStore } from \"@udecode/plate-common\";\n\nexport const dndStore = createZustandStore(\"dnd\")({\n  isDragging: false,\n  editorId: null,\n});\n","import React from \"react\";\n\nimport { ScrollArea, ScrollAreaProps } from \"./ScrollArea\";\n\nexport type ScrollerProps = Omit<ScrollAreaProps, \"placement\">;\n/**\n * Set up an edge scroller at the top of the page for scrolling up.\n * One at the bottom for scrolling down.\n */\nexport function Scroller(props: ScrollerProps) {\n  return (\n    <>\n      <ScrollArea placement=\"top\" {...props} />\n      <ScrollArea placement=\"bottom\" {...props} />\n    </>\n  );\n}\n","import React from \"react\";\nimport throttle from \"lodash/throttle.js\";\nimport raf from \"raf\";\n\nconst getCoords = (e: any) => {\n  if (e.type === \"touchmove\") {\n    return { x: e.changedTouches[0].clientX, y: e.changedTouches[0].clientY };\n  }\n\n  return { x: e.clientX, y: e.clientY };\n};\n\nexport interface ScrollAreaProps {\n  placement: \"top\" | \"bottom\";\n  enabled?: boolean;\n  height?: number;\n  zIndex?: number;\n  minStrength?: number;\n  strengthMultiplier?: number;\n  containerRef?: React.RefObject<any>;\n  scrollAreaProps?: React.HTMLAttributes<HTMLDivElement>;\n}\n\nexport function ScrollArea({\n  placement,\n  enabled = true,\n  height = 100,\n  zIndex = 10_000,\n  minStrength = 0.15,\n  strengthMultiplier = 25,\n  containerRef,\n  scrollAreaProps,\n}: ScrollAreaProps) {\n  const ref = React.useRef<HTMLDivElement>();\n\n  const scaleYRef = React.useRef(0);\n  const frameRef = React.useRef<number | null>(null);\n\n  const direction = placement === \"top\" ? -1 : 1;\n\n  // Drag a fixed, invisible box of custom height at the top, and bottom\n  // of the window. Make sure to show it only when dragging something.\n  const style: React.CSSProperties = {\n    position: \"fixed\",\n    height,\n    width: \"100%\",\n    opacity: 0,\n    zIndex,\n    ...scrollAreaProps?.style,\n  };\n\n  if (placement === \"top\") {\n    style.top = 0;\n  } else if (placement === \"bottom\") {\n    style.bottom = 0;\n  }\n\n  const stopScrolling = () => {\n    scaleYRef.current = 0;\n\n    if (frameRef.current) {\n      raf.cancel(frameRef.current);\n      frameRef.current = null;\n    }\n  };\n\n  const startScrolling = () => {\n    const tick = () => {\n      const scaleY = scaleYRef.current;\n\n      // stop scrolling if there's nothing to do\n      if (strengthMultiplier === 0 || scaleY === 0) {\n        stopScrolling();\n        return;\n      }\n\n      const container = containerRef?.current ?? window;\n      container.scrollBy(0, scaleY * strengthMultiplier * direction);\n\n      frameRef.current = raf(tick);\n\n      // there's a bug in safari where it seems like we can't get\n      // mousemove events from a container that also emits a scroll\n      // event that same frame. So we should double the strengthMultiplier and only adjust\n      // the scroll position at 30fps\n    };\n\n    tick();\n  };\n\n  // Update scaleY every 100ms or so\n  // and start scrolling if necessary\n  const updateScrolling = throttle(\n    (e) => {\n      const container = ref.current;\n      if (!container) return;\n\n      const { top: y, height: h } = container.getBoundingClientRect();\n      const coords = getCoords(e);\n\n      const strength = Math.max(Math.max(coords.y - y, 0) / h, minStrength);\n\n      // calculate strength\n      scaleYRef.current = direction === -1 ? 1 - strength : strength;\n\n      // start scrolling if we need to\n      if (!frameRef.current && scaleYRef.current) {\n        startScrolling();\n      }\n    },\n    100,\n    { trailing: false }\n  );\n\n  const handleEvent = (e: any) => {\n    updateScrolling(e);\n  };\n\n  React.useEffect(() => {\n    if (!enabled) {\n      stopScrolling();\n    }\n  }, [enabled]);\n\n  if (!enabled) return null;\n\n  // Hide the element if not enabled, so it doesn't interfere with clicking things under it.\n  return (\n    <div\n      ref={ref as any}\n      style={style}\n      onDragOver={handleEvent}\n      onDragLeave={stopScrolling}\n      onDragEnd={stopScrolling}\n      // touchmove events don't seem to work across siblings, so we unfortunately\n      // would have to attach the listeners to the body\n      onTouchMove={handleEvent}\n      {...scrollAreaProps}\n    />\n  );\n}\n","import React from \"react\";\nimport { TEditor, TElement } from \"@udecode/plate-common\";\nimport { ConnectDragSource, DropTargetMonitor } from \"react-dnd\";\n\nimport { DragItemNode, DropLineDirection, useDndBlock } from \"..\";\n\nexport type DraggableState = {\n  dropLine: DropLineDirection;\n  isHovered: boolean;\n  setIsHovered: (isHovered: boolean) => void;\n  isDragging: boolean;\n  nodeRef: React.RefObject<HTMLDivElement>;\n  dragRef: ConnectDragSource;\n};\n\nexport const useDraggableState = (props: {\n  element: TElement;\n  onDropHandler?: (\n    editor: TEditor,\n    props: {\n      monitor: DropTargetMonitor<DragItemNode, unknown>;\n      dragItem: DragItemNode;\n      nodeRef: any;\n      id: string;\n    }\n  ) => boolean;\n}): DraggableState => {\n  const { element, onDropHandler } = props;\n\n  const nodeRef = React.useRef<HTMLDivElement>(null);\n  const [isHovered, setIsHovered] = React.useState(false);\n  const { dropLine, isDragging, dragRef } = useDndBlock({\n    id: element.id as string,\n    nodeRef,\n    onDropHandler,\n  });\n\n  return {\n    dropLine,\n    isHovered,\n    setIsHovered,\n    isDragging,\n    nodeRef,\n    dragRef,\n  };\n};\n\nexport const useDraggable = (state: DraggableState) => {\n  return {\n    previewRef: state.nodeRef,\n    handleRef: state.dragRef,\n    groupProps: {\n      onPointerEnter: () => state.setIsHovered(true),\n      onPointerLeave: () => state.setIsHovered(false),\n    },\n    droplineProps: {\n      contentEditable: false,\n    },\n    gutterLeftProps: {\n      contentEditable: false,\n    },\n  };\n};\n","import React from \"react\";\nimport { findNodePath, PlateRenderElementProps, TEditor } from \"@udecode/plate-common\";\nimport { Path } from \"slate\";\nimport { useReadOnly } from \"slate-react\";\n\nexport interface WithDraggableOptions<T = any> {\n  /**\n   * Document level where dnd is enabled. 0 = root blocks, 1 = first level of children, etc.\n   * Set to null to allow all levels.\n   * @default 0\n   */\n  level?: number | null;\n\n  /**\n   * Filter out elements that can't be dragged.\n   */\n  filter?: (editor: TEditor, path: Path) => boolean;\n\n  /**\n   * Enables dnd in read-only.\n   */\n  allowReadOnly?: boolean;\n  draggableProps?: T;\n}\n\nexport const useWithDraggable = <T = any>({ editor, level = 0, filter, element, allowReadOnly = false, draggableProps }: WithDraggableOptions<T> & PlateRenderElementProps) => {\n  const readOnly = useReadOnly();\n  const path = React.useMemo(() => findNodePath(editor, element), [editor, element]);\n\n  const filteredOut = React.useMemo(() => path && ((Number.isInteger(level) && level !== path.length - 1) || (filter && filter(editor, path))), [path, level, filter, editor]);\n\n  return {\n    disabled: filteredOut || (!allowReadOnly && readOnly),\n    draggableProps: {\n      editor,\n      element,\n      ...draggableProps,\n    },\n  };\n};\n","import React from \"react\";\nimport { AnyObject, PlateRenderElementProps } from \"@udecode/plate-common\";\n\nimport { useWithDraggable, WithDraggableOptions } from \"./useWithDraggable\";\n\nexport const withDraggable = <T extends AnyObject = AnyObject>(Draggable: React.FC<any>, Component: React.FC<any>, options?: WithDraggableOptions<T>) =>\n  // eslint-disable-next-line react/display-name\n  React.forwardRef<HTMLDivElement, PlateRenderElementProps>((props, ref) => {\n    const { disabled, draggableProps } = useWithDraggable({\n      ...options,\n      ...props,\n    });\n\n    if (disabled) {\n      return <Component {...props} />;\n    }\n\n    return (\n      <Draggable ref={ref} {...draggableProps}>\n        <Component {...props} />\n      </Draggable>\n    );\n  });\n","import React from \"react\";\nimport { TEditor, useEditorRef } from \"@udecode/plate-common\";\nimport { DropTargetMonitor } from \"react-dnd\";\nimport { getEmptyImage } from \"react-dnd-html5-backend\";\n\nimport { DragItemNode, DropLineDirection } from \"../types\";\nimport { useDragNode, UseDragNodeOptions } from \"./useDragNode\";\nimport { useDropNode, UseDropNodeOptions } from \"./useDropNode\";\nimport { dndStore } from \"../dndStore\";\n\nexport interface UseDndNodeOptions extends Pick<UseDropNodeOptions, \"id\" | \"nodeRef\">, Pick<UseDragNodeOptions, \"type\"> {\n  drag?: UseDragNodeOptions;\n  drop?: UseDropNodeOptions;\n  onDropHandler?: (\n    editor: TEditor,\n    props: {\n      monitor: DropTargetMonitor<DragItemNode, unknown>;\n      dragItem: DragItemNode;\n      nodeRef: any;\n      id: string;\n    }\n  ) => boolean;\n  preview?: {\n    /**\n     * Whether to disable the preview.\n     */\n    disable?: boolean;\n\n    /**\n     * The reference to the preview element.\n     */\n    ref?: any;\n  };\n}\n\n/**\n * {@link useDragNode} and {@link useDropNode} hooks to drag and drop a node from the editor.\n * A default preview is used to show the node being dragged, which can be customized or removed.\n * Returns the drag ref and drop line direction.\n */\nexport const useDndNode = ({ id, type, nodeRef, preview: previewOptions = {}, drag: dragOptions, drop: dropOptions, onDropHandler }: UseDndNodeOptions) => {\n  const editor = useEditorRef();\n\n  const [dropLine, setDropLine] = React.useState<DropLineDirection>(\"\");\n\n  const [{ isDragging }, dragRef, preview] = useDragNode(editor, {\n    id,\n    type,\n    ...dragOptions,\n  });\n  const dropEditor = useEditorRef(dndStore.use.editorId() || undefined);\n  // console.log('测试drop33', dndStore.use.editorId(), dropEditor);\n  const [{ isOver }, drop] = useDropNode(dropEditor, {\n    accept: type,\n    id,\n    nodeRef,\n    dropLine,\n    onChangeDropLine: setDropLine,\n    onDropHandler,\n    ...dropOptions,\n  });\n\n  if (previewOptions.disable) {\n    drop(nodeRef);\n    preview(getEmptyImage(), { captureDraggingState: true });\n  } else if (previewOptions.ref) {\n    drop(nodeRef);\n    preview(previewOptions.ref);\n  } else {\n    preview(drop(nodeRef));\n  }\n\n  if (!isOver && dropLine) {\n    setDropLine(\"\");\n  }\n\n  return {\n    isDragging,\n    isOver,\n    dropLine,\n    dragRef,\n  };\n};\n","import { TEditor, Value } from \"@udecode/plate-common\";\nimport { DragSourceHookSpec, useDrag } from \"react-dnd\";\n\nimport { dndStore } from \"../dndStore\";\nimport { DragItemNode } from \"../types\";\n\nexport interface UseDragNodeOptions extends DragSourceHookSpec<DragItemNode, unknown, { isDragging: boolean }> {\n  id: string;\n}\n\n/**\n * `useDrag` hook to drag a node from the editor. `item` with `id` is required.\n *\n * On drag start:\n * - set `editor.isDragging` to true\n * - add `dragging` class to `body`\n *\n * On drag end:\n * - set `editor.isDragging` to false\n * - remove `dragging` class to `body`\n *\n * Collect:\n * - isDragging: true if mouse is dragging the block\n */\nexport const useDragNode = <V extends Value>(editor: TEditor<V>, { id, item, ...options }: UseDragNodeOptions) => {\n  return useDrag<DragItemNode, unknown, { isDragging: boolean }>(\n    () => ({\n      item(monitor) {\n        dndStore.set.isDragging(true);\n        editor.isDragging = true;\n        document.body.classList.add(\"dragging\");\n\n        const _item = typeof item === \"function\" ? item(monitor) : item;\n\n        return {\n          id,\n          editorId: editor.id,\n          ..._item,\n        };\n      },\n      collect: (monitor) => ({\n        isDragging: monitor.isDragging(),\n      }),\n      end: () => {\n        dndStore.set.isDragging(false);\n        editor.isDragging = false;\n        document.body.classList.remove(\"dragging\");\n      },\n      ...options,\n    }),\n    []\n  );\n};\n","import { TEditor, TReactEditor, Value } from \"@udecode/plate-common\";\nimport { DropTargetHookSpec, DropTargetMonitor, useDrop } from \"react-dnd\";\n\nimport { onDropNode } from \"../transforms/onDropNode\";\nimport { onHoverNode } from \"../transforms/onHoverNode\";\nimport { DragItemNode, DropLineDirection } from \"../types\";\n\nexport interface UseDropNodeOptions extends DropTargetHookSpec<DragItemNode, unknown, { isOver: boolean }> {\n  /**\n   * The reference to the node being dragged.\n   */\n  nodeRef: any;\n\n  /**\n   * Id of the node.\n   */\n  id: string;\n\n  /**\n   * Current value of dropLine.\n   */\n  dropLine: string;\n\n  /**\n   * Callback called on dropLine change.\n   */\n  onChangeDropLine: (newValue: DropLineDirection) => void;\n  /**\n   * Intercepts the drop handling.\n   * If `false` is returned, the default drop behavior is called after.\n   * If `true` is returned, the default behavior is not called.\n   */\n  onDropHandler?: (\n    editor: TEditor,\n    props: {\n      monitor: DropTargetMonitor<DragItemNode, unknown>;\n      dragItem: DragItemNode;\n      nodeRef: any;\n      id: string;\n    }\n  ) => boolean;\n}\n\n/**\n * `useDrop` hook to drop a node on the editor.\n *\n * On drop:\n * - get hover direction (top, bottom or undefined), return early if undefined\n * - dragPath: find node with id = dragItem.id, return early if not found\n * - focus editor\n * - dropPath: find node with id = id, its path should be next (bottom) or previous (top)\n * - move node from dragPath to dropPath\n *\n * On hover:\n * - get drop line direction\n * - if differs from dropLine, setDropLine is called\n *\n * Collect:\n * - isOver: true if mouse is over the block\n */\nexport const useDropNode = <V extends Value>(editor: TReactEditor<V>, { nodeRef, id, dropLine, onChangeDropLine, onDropHandler, ...options }: UseDropNodeOptions) => {\n  // console.log('测试drop33', editor.id);\n  return useDrop<DragItemNode, unknown, { isOver: boolean }>({\n    drop: (dragItem, monitor) => {\n      const handled =\n        !!onDropHandler &&\n        onDropHandler(editor, {\n          nodeRef,\n          id,\n          dragItem,\n          monitor,\n        });\n\n      if (handled) return;\n\n      onDropNode(editor, { nodeRef, id, dragItem, monitor });\n    },\n    collect: (monitor) => ({\n      isOver: monitor.isOver(),\n    }),\n    hover(item: DragItemNode, monitor: DropTargetMonitor) {\n      onHoverNode(editor, {\n        nodeRef,\n        id,\n        dropLine,\n        onChangeDropLine,\n        dragItem: item,\n        monitor,\n      });\n    },\n    ...options,\n  });\n};\n","import {\r\n  findNode,\r\n  focusEditor,\r\n  getQueryOptions,\r\n  insertElements,\r\n  moveNodes,\r\n  TElement,\r\n  TReactEditor,\r\n  Value,\r\n} from '@udecode/plate-common';\r\nimport { DropTargetMonitor } from 'react-dnd';\r\nimport { Path } from 'slate';\r\n\r\nimport { UseDropNodeOptions } from '../hooks';\r\nimport { DragItemNode } from '../types';\r\nimport { getHoverDirection } from '../utils';\r\n\r\n// import { insertTodoListItem } from \"@udecode/plate-list\";\r\n\r\n/**\r\n * Callback called on drag an drop a node with id.\r\n */\r\nexport const onDropNode = <V extends Value>(\r\n  editor: TReactEditor<V>,\r\n  {\r\n    dragItem,\r\n    monitor,\r\n    nodeRef,\r\n    id,\r\n  }: {\r\n    dragItem: DragItemNode;\r\n    monitor: DropTargetMonitor;\r\n  } & Pick<UseDropNodeOptions, 'nodeRef' | 'id'>\r\n) => {\r\n  const direction = getHoverDirection({ dragItem, monitor, nodeRef, id });\r\n  if (!direction) return;\r\n\r\n  const isInsert = dragItem.editorId === undefined; // 分为拖拽和插入两种\r\n  const dragEntry = findNode(editor, {\r\n    at: [],\r\n    // match: { id: dragItem.id },\r\n    match: { id: isInsert ? id : dragItem.id },\r\n  });\r\n  if (!dragEntry) return;\r\n  const [, dragPath] = dragEntry;\r\n\r\n  focusEditor(editor);\r\n\r\n  let dropPath: Path | undefined;\r\n  if (direction === 'bottom') {\r\n    dropPath = findNode(editor, { at: [], match: { id } })?.[1];\r\n    if (!dropPath) return;\r\n\r\n    if (Path.equals(dragPath, Path.next(dropPath))) return;\r\n  }\r\n\r\n  if (direction === 'top') {\r\n    const nodePath = findNode(editor, { at: [], match: { id } })?.[1];\r\n\r\n    if (!nodePath) return;\r\n    dropPath = [...nodePath.slice(0, -1), nodePath.at(-1)! - 1];\r\n\r\n    if (Path.equals(dragPath, dropPath)) return;\r\n  }\r\n\r\n  if (direction) {\r\n    const _dropPath = dropPath as Path;\r\n\r\n    const before =\r\n      Path.isBefore(dragPath, _dropPath) && Path.isSibling(dragPath, _dropPath);\r\n    const to = before ? _dropPath : Path.next(_dropPath);\r\n    // console.log(\"测试drop11\", dragItem, before, dragPath);\r\n\r\n    if (!isInsert) {\r\n      moveNodes(editor, {\r\n        at: dragPath,\r\n        to,\r\n      });\r\n    } else {\r\n      let element: TElement = {\r\n        type: dragItem.id,\r\n        children: [{ text: '' }],\r\n        styles: dragItem.styles,\r\n      };\r\n\r\n      if (dragItem.id === 'ol') {\r\n        // 类型设置为p，是因为plate在识别到list的时候，会自动在外层包一层ul/ol和li，因此底下传入的时候不需要提供额外的list标签。\r\n        element = {\r\n          type: 'p',\r\n          children: [{ text: '' }],\r\n          styles: dragItem.styles,\r\n          listStyleType: 'number',\r\n          indent: 2,\r\n        };\r\n      }\r\n\r\n      insertElements(\r\n        editor,\r\n        element,\r\n        getQueryOptions(editor, {\r\n          select: true,\r\n          nextBlock: true,\r\n        })\r\n      );\r\n      if (direction === 'top') {\r\n        // 因为插入的是下一格，所以需要上移一步\r\n        moveNodes(editor, {\r\n          at: Path.next(to),\r\n          to,\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n","import { DropTargetMonitor, XYCoord } from \"react-dnd\";\n\nimport { DragItemNode, DropDirection } from \"../types\";\n\nexport interface GetHoverDirectionOptions {\n  dragItem: DragItemNode;\n\n  monitor: DropTargetMonitor;\n\n  /**\n   * The node ref of the node being dragged.\n   */\n  nodeRef: any;\n\n  /**\n   * Hovering node id.\n   */\n  id: string;\n}\n\n/**\n * If dragging a node A over another node B:\n * get the direction of node A relative to node B.\n */\nexport const getHoverDirection = ({ dragItem, id, monitor, nodeRef }: GetHoverDirectionOptions): DropDirection => {\n  if (!nodeRef.current) return;\n\n  const dragId = dragItem.id;\n\n  // Don't replace items with themselves\n  if (dragId === id) return;\n\n  // Determine rectangle on screen\n  const hoverBoundingRect = nodeRef.current?.getBoundingClientRect();\n\n  // Get vertical middle\n  const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n\n  // Determine mouse position\n  const clientOffset = monitor.getClientOffset();\n  if (!clientOffset) return;\n\n  // Get pixels to the top\n  const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top;\n\n  // Only perform the move when the mouse has crossed half of the items height\n  // When dragging downwards, only move when the cursor is below 50%\n  // When dragging upwards, only move when the cursor is above 50%\n\n  // Dragging downwards\n  // if (dragId < hoverId && hoverClientY < hoverMiddleY) {\n  if (hoverClientY < hoverMiddleY) {\n    return \"top\";\n  }\n\n  // Dragging upwards\n  // if (dragId > hoverId && hoverClientY > hoverMiddleY) {\n  if (hoverClientY >= hoverMiddleY) {\n    return \"bottom\";\n  }\n};\n","/**\n * Get new direction if updated\n */\nimport { DropLineDirection } from \"../types\";\n\nexport const getNewDirection = (previousDir: string, dir?: string): DropLineDirection | undefined => {\n  if (!dir && previousDir) {\n    return \"\";\n  }\n\n  if (dir === \"top\" && previousDir !== \"top\") {\n    return \"top\";\n  }\n\n  if (dir === \"bottom\" && previousDir !== \"bottom\") {\n    return \"bottom\";\n  }\n};\n","import { collapseSelection, focusEditor, isExpanded, TReactEditor, Value } from \"@udecode/plate-common\";\nimport { DropTargetMonitor } from \"react-dnd\";\n\nimport { UseDropNodeOptions } from \"../hooks/useDropNode\";\nimport { DragItemNode } from \"../types\";\nimport { getHoverDirection, getNewDirection } from \"../utils\";\nimport { dndStore } from \"../dndStore\";\n\n/**\n * Callback called when dragging a node and hovering nodes.\n */\nexport const onHoverNode = <V extends Value>(\n  editor: TReactEditor<V>,\n  {\n    dragItem,\n    monitor,\n    nodeRef,\n    onChangeDropLine,\n    dropLine,\n    id,\n  }: {\n    dragItem: DragItemNode;\n    monitor: DropTargetMonitor;\n  } & Pick<UseDropNodeOptions, \"nodeRef\" | \"onChangeDropLine\" | \"id\" | \"dropLine\">\n) => {\nalert(editor.id);\n  const direction = getHoverDirection({\n    dragItem,\n    monitor,\n    nodeRef,\n    id,\n  });\n  const dropLineDir = getNewDirection(dropLine, direction);\n  if (dropLineDir) onChangeDropLine(dropLineDir);\n\n  if (direction && isExpanded(editor.selection)) {\n    focusEditor(editor);\n    collapseSelection(editor);\n  }\n  if (direction) {\n    dndStore.set.editorId(editor.id);\n  }\n  console.log(\"测试drop22\", direction, dropLineDir, editor.id, monitor.getHandlerId());\n};\n","import { TEditor, Value } from \"@udecode/plate-common\";\n\nimport { useDragNode } from \"./useDragNode\";\n\nexport const DRAG_ITEM_BLOCK = \"block\";\n\n/**\n * {@link useDragNode}\n */\nexport const useDragBlock = <V extends Value>(editor: TEditor<V>, id: string) =>\n  useDragNode<V>(editor, {\n    id,\n    type: DRAG_ITEM_BLOCK,\n  });\n","import { WithPartial } from \"@udecode/plate-common\";\n\nimport { useDndNode, UseDndNodeOptions } from \"./useDndNode\";\nimport { DRAG_ITEM_BLOCK } from \"./useDragBlock\";\n\n/**\n * {@link useDndNode}\n */\nexport const useDndBlock = (options: WithPartial<UseDndNodeOptions, \"type\">) =>\n  useDndNode({\n    type: DRAG_ITEM_BLOCK,\n    ...options,\n  });\n","import { TReactEditor, Value } from \"@udecode/plate-common\";\n\nimport { DRAG_ITEM_BLOCK } from \"./useDragBlock\";\nimport { useDropNode, UseDropNodeOptions } from \"./useDropNode\";\n\n/**\n * {@link useDropNode}\n */\nexport const useDropBlock = <V extends Value>(editor: TReactEditor<V>, options: Omit<UseDropNodeOptions, \"accept\">) => useDropNode(editor, { accept: DRAG_ITEM_BLOCK, ...options });\n","import { getNodeEntries, GetNodeEntriesOptions, isBlock, TEditor, Value } from \"@udecode/plate-common\";\n\n/**\n * Get blocks with an id\n */\nexport const getBlocksWithId = <V extends Value>(editor: TEditor<V>, options: GetNodeEntriesOptions<V>) => {\n  const _nodes = getNodeEntries(editor, {\n    match: (n) => isBlock(editor, n) && !!n.id,\n    ...options,\n  });\n  return Array.from(_nodes);\n};\n","import { getRange, TEditor, TNodeEntry, Value } from \"@udecode/plate-common\";\n\n/**\n * Get node entries range.\n */\nexport const getNodesRange = <V extends Value>(editor: TEditor<V>, nodeEntries: TNodeEntry[]) => {\n  if (nodeEntries.length === 0) return;\n\n  const firstBlockPath = nodeEntries[0][1];\n  const lastBlockPath = nodeEntries.at(-1)![1];\n\n  return getRange(editor, firstBlockPath, lastBlockPath);\n};\n","import { findNode, focusEditor, getStartPoint, select, TReactEditor, Value } from \"@udecode/plate-common\";\n\n/**\n * Select the start of a block by id and focus the editor.\n */\nexport const focusBlockStartById = <V extends Value>(editor: TReactEditor<V>, id: string) => {\n  const path = findNode(editor, { at: [], match: { id } })?.[1];\n  if (!path) return;\n\n  select(editor, getStartPoint(editor, path));\n  focusEditor(editor);\n};\n","import { focusEditor, GetNodeEntriesOptions, removeNodes, TReactEditor, unhangRange, Value } from \"@udecode/plate-common\";\n\nimport { getBlocksWithId } from \"../queries/getBlocksWithId\";\nimport { getNodesRange } from \"../queries/getNodesRange\";\n\n/**\n * Remove blocks with an id and focus the editor.\n */\nexport const removeBlocksAndFocus = <V extends Value>(editor: TReactEditor<V>, options: GetNodeEntriesOptions<V>) => {\n  unhangRange(editor, options?.at, options);\n\n  const nodeEntries = getBlocksWithId(editor, options);\n\n  removeNodes(editor, { at: getNodesRange(editor, nodeEntries) });\n  focusEditor(editor);\n};\n","import { findNode, focusEditor, getRange, select, TReactEditor, Value } from \"@udecode/plate-common\";\n\n/**\n * Select the block above the selection by id and focus the editor.\n */\nexport const selectBlockById = <V extends Value>(editor: TReactEditor<V>, id: string) => {\n  const path = findNode(editor, { at: [], match: { id } })?.[1];\n  if (!path) return;\n\n  select(editor, getRange(editor, path));\n  focusEditor(editor);\n};\n","import { focusEditor, PlateEditor, select, Value } from \"@udecode/plate-common\";\nimport { Range } from \"slate\";\n\nimport { getBlocksWithId } from \"../queries/getBlocksWithId\";\nimport { getNodesRange } from \"../queries/getNodesRange\";\nimport { selectBlockById } from \"./selectBlockById\";\n\n/**\n * Select blocks by selection or by id.\n * If the block with id is not selected, select the block with id.\n * Else, select the blocks above the selection.\n */\nexport const selectBlocksBySelectionOrId = <V extends Value>(editor: PlateEditor<V>, id: string) => {\n  if (!editor.selection) return;\n\n  const blockEntries = getBlocksWithId(editor, { at: editor.selection });\n  const isBlockSelected = blockEntries.some((blockEntry) => blockEntry[0].id === id);\n\n  if (isBlockSelected) {\n    select(editor, getNodesRange(editor, blockEntries) as Range);\n    focusEditor(editor);\n  } else {\n    selectBlockById(editor, id);\n  }\n};\n"],"mappings":"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","names":["React","React","React","React","React","React","React","React","React","React","React","React","React","focusEditor","focusEditor","React","findNode","focusEditor","focusEditor","focusEditor","findNode","focusEditor","getRange","select","focusEditor","select","select","focusEditor"]}